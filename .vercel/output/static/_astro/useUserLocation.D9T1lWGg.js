import{r as i}from"./index.DiEladB3.js";const u="user_location_data",f=1440*60*1e3;function h(o){const[e,a]=i.useState({countryName:"United States",countryCode:"US",currencyCode:"USD",rate:1,loading:!0,error:null});i.useEffect(()=>{(async()=>{const n=localStorage.getItem(u);if(n){const{data:r,timestamp:t}=JSON.parse(n);if(Date.now()-t<f){a(r);return}}try{const t=await(await fetch("https://ipapi.co/json/")).json();if(t.error)throw new Error("IP API Error");const c=(await(await fetch("https://open.er-api.com/v6/latest/USD")).json()).rates[t.currency];if(!c)throw new Error("Rate not found");const s={countryName:t.country_name,countryCode:t.country_code,currencyCode:t.currency,rate:c,loading:!1,error:null};localStorage.setItem(u,JSON.stringify({data:s,timestamp:Date.now()})),a(s)}catch(r){console.error("Location/Currency fetch error:",r),a(t=>({...t,loading:!1,error:"Failed to fetch location data"}))}})()},[]);const l=o!==void 0?new Intl.NumberFormat(e.countryCode==="US"?"en-US":"es-CO",{style:"currency",currency:e.currencyCode,maximumFractionDigits:0}).format(o*e.rate):null;return{...e,formattedPrice:l}}export{h as u};
